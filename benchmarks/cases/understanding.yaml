# Understanding Tasks
# These test comprehension of code architecture and data flow

cases:
  - id: understand_search_flow
    name: Understand search data flow
    prompt: |
      Use ultrasync search. Explain how a search query flows through
      the system from MCP tool call to results. What are the key
      steps?
    expected_concepts:
      - embedding
      - vector similarity
      - JIT index
      - threshold filtering
    category: understanding
    difficulty: medium

  - id: understand_indexing
    name: Understand indexing pipeline
    prompt: |
      Use ultrasync search. How does file indexing work? What happens
      when a new file is indexed - what data structures are created?
    expected_concepts:
      - symbol extraction
      - embedding generation
      - LMDB storage
      - vector store
    category: understanding
    difficulty: medium

  - id: understand_memory_tiers
    name: Understand memory tiering
    prompt: |
      Use ultrasync search. How does the memory system decide which
      memories to show? What determines "prior context" vs "related
      memories"?
    expected_concepts:
      - relevance threshold
      - score tiering
      - 0.5 high relevance
      - 0.3 medium relevance
    category: understanding
    difficulty: easy

  - id: understand_two_layer
    name: Understand Rust/Python architecture
    prompt: |
      Use ultrasync search. Explain the two-layer architecture with
      Rust and Python. What does each layer handle and why?
    expected_concepts:
      - GlobalIndex
      - ThreadIndex
      - mmap
      - zero-copy
      - pyo3
    category: understanding
    difficulty: hard

  - id: understand_context_detection
    name: Understand context classification
    prompt: |
      Use ultrasync search. How does the system classify files into
      contexts like "context:auth" or "context:frontend"? What
      triggers this?
    expected_concepts:
      - pattern matching
      - AOT indexing
      - context patterns
      - file content analysis
    category: understanding
    difficulty: medium
