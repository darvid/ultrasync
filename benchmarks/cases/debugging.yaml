# Debugging Tasks
# These test ability to trace issues and find root causes

cases:
  - id: debug_slow_search
    name: Debug slow search performance
    prompt: |
      Use ultrasync search. Search queries are taking too long.
      Where would you look to diagnose performance issues in the
      search path?
    expected_files:
      - src/ultrasync/mcp_server.py
      - src/ultrasync/jit_index.py
    expected_concepts:
      - embedding time
      - vector search
      - threshold
      - result filtering
    category: debugging
    difficulty: medium

  - id: debug_missing_results
    name: Debug missing search results
    prompt: |
      Use ultrasync search. A file I know exists isn't showing up
      in search results. What could cause this and where would you
      investigate?
    expected_concepts:
      - indexing
      - threshold filtering
      - file patterns
      - gitignore
    category: debugging
    difficulty: medium

  - id: debug_memory_not_persisting
    name: Debug memory persistence
    prompt: |
      Use ultrasync search. Memories written in one session aren't
      appearing in the next. Trace the memory write path to find
      where persistence happens.
    expected_files:
      - src/ultrasync/jit_index.py
    expected_concepts:
      - LMDB
      - memory write
      - embedding
      - flush/commit
    category: debugging
    difficulty: hard

  - id: debug_insight_detection
    name: Debug insight detection
    prompt: |
      Use ultrasync search. TODOs in my code aren't being detected.
      Where is the pattern matching logic and what patterns does it
      look for?
    expected_files:
      - src/ultrasync/patterns.py
    expected_concepts:
      - regex patterns
      - insight types
      - pattern compilation
    category: debugging
    difficulty: easy
